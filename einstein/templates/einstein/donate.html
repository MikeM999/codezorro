{% extends 'main.html' %}

{% block content%}

<div class=" d-flex justify-content-center">        
    <div class="container">
        <div class="col-md-2">
        </div>
        <div class="col-md-10">
            <br>
            <form method="POST">
                {% csrf_token %}
                <p>Thank you for choosing to help keep this site free of ads, cookies, and registration.</p>
                <p>Click the "Donate" button below to donate â‚¬5</p>

                <button id="donate_button" class="btn btn--main--outline" type="submit">Donate</button>
            </form>          
        </div>
    </div>
</div>
<script src="https://js.stripe.com/v3/"></script>
          <script>
          var stripe = Stripe('{{ stripe_public_key }}');
          const donate_button = document.querySelector('#donate_button')
            donate_button.addEventListener('click',event => {
                stripe.redirectToCheckout({
              sessionId: '{{ session_id }}'
            }).then(function(result) {});
          })
          </script>

{% endblock content %}